@page "/nhacungcap/create"
@using TKS_intern_client.Services
@using TKS_intern_client.Shared.Forms
@using TKS_intern_shared.ViewModels.NhaCungCaps
@inject ApiClient Api
@inject NavigationManager Navigation

<h3>Thêm mới Nhà Cung Cấp</h3>

<NhaCungCapForm Model="model"
                OnValidSubmitCallback="HandleValidSubmit"
                OnCancel="Cancel" />

@code {
    private NhaCungCapSaveVM model = new();

    private async Task HandleValidSubmit()
    {
        var response = await Api.PostAsync("api/NhaCungCaps", model);
        if (response.IsSuccessStatusCode)
        {
            Navigation.NavigateTo("/nhacungcap");
        }
        else
        {
            Console.WriteLine("Thêm thất bại: " + response.StatusCode);
        }
    }

    private void Cancel()
    {
        Navigation.NavigateTo("/nhacungcap");
    }
}
